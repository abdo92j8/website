(()=>{var Tt=Object.create;var de=Object.defineProperty;var St=Object.getOwnPropertyDescriptor;var Ot=Object.getOwnPropertyNames;var Bt=Object.getPrototypeOf,Lt=Object.prototype.hasOwnProperty;var jt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),D=(e,t)=>{for(var n in t)de(e,n,{get:t[n],enumerable:!0})},Pt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ot(t))!Lt.call(e,o)&&o!==n&&de(e,o,{get:()=>t[o],enumerable:!(r=St(t,o))||r.enumerable});return e};var Dt=(e,t,n)=>(n=e!=null?Tt(Bt(e)):{},Pt(t||!e||!e.__esModule?de(n,"default",{value:e,enumerable:!0}):n,e));var dt=jt((ct,at)=>{var nn=function(){"use strict";var e=0;function t(s){var l=[],u=0,c=0;this.push=function(a){u-c>=s&&++c>=s&&(c=0,u=s-1),l[u%s]=a,u++},this.asArray=function(){var a=l.slice(c,Math.min(u,s)),p=l.slice(0,Math.max(u-s,0));return a.concat(p)},this.list=l}function n(s,l){for(var u=l,c=0;c<s.length;c++){var a=s[c],p=u.r;p[a]||(p[a]={w:a,r:{},i:e++}),u=p[a]}return u}function r(s,l,u){var c;return u[s]?c=u[s]:(c=function(a,p){for(var h=[[p,0]],v={},y=[];h.length;){var i=h.shift(),d=i[0],m=i[1],f=d.r,g=a[m];if(g===void 0&&d.fn&&!v[d.i]?(v[d.i]=1,y.push(d.fn)):f[g]&&h.push([f[g],m+1]),f["#"])for(var A=m;A<=a.length;A++)h.push([f["#"],A]);g&&f["*"]&&h.push([f["*"],m+1])}return y}(s.split("."),l),u[s]=c),c}var o=function(){var s={w:"",r:{},i:e++},l={},u=new t(9999);function c(p,h){var v=n(p.split("."),s),y=v.fn||[];return y.push(h),v.fn=y,l={},function(){var i=y.indexOf(h);i>-1&&y.splice(i,1)}}function a(p,h){var v=Date.now();u.push([p,v]);for(var y=r(p,s,l),i={topic:p},d=0;d<y.length;d++)for(var m=y[d],f=0;f<m.length;f++)m[f](h,i)}this.emit=a,this.on=c,this.history=function(p){var h={w:"",r:{},i:e++};n(p.split("."),h).fn=1;for(var v=[],y={},i=u.asArray(),d=0;d<i.length;d++){var m=i[d];r(m[0],h,y).length&&v.push(m)}return v},this.publish=a,this.subscribe=c};return o.Ring=t,o}();typeof ct<"u"&&(at.exports=nn)});var C={};D(C,{add:()=>w,initialize:()=>ge,isEmpty:()=>Ke,isEnabled:()=>Fe,queue:()=>b,reset:()=>Gt,send:()=>ye,start:()=>we});var O={};D(O,{clearInterval:()=>V,clearTimeout:()=>Pe,ready:()=>j,setInterval:()=>S,setLoaded:()=>Mt,setTimeout:()=>G});var $=()=>new Promise(e=>{document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e()});var S=window.setInterval,V=window.clearInterval,G=window.setTimeout,Pe=window.clearTimeout,ue=!1,Mt=e=>ue=e,j=async()=>{if(ue)return;let e=document.createElement("iframe");await $(),window.document.body.append(e),S=e&&e.contentWindow&&e.contentWindow.setInterval&&e.contentWindow.setInterval.bind(window)||window.setInterval,V=e&&e.contentWindow&&e.contentWindow.clearInterval&&e.contentWindow.clearInterval.bind(window)||window.clearInterval,G=e&&e.contentWindow&&e.contentWindow.setTimeout&&e.contentWindow.setTimeout.bind(window)||window.setTimeout,Pe=e&&e.contentWindow&&e.contentWindow.clearTimeout&&e.contentWindow.clearTimeout.bind(window)||window.clearTimeout,e.remove(),ue=!0};var W=e=>{let t=new Set;JSON.stringify(e,(r,o)=>t.add(r)&&o);let n=Array.from(t).sort();return JSON.stringify(e,n)},pe=e=>JSON.parse(e);var K=e=>String.fromCharCode.apply(null,e),F=e=>btoa(K(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),z=e=>new TextEncoder().encode(e);var q=e=>btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),Me=e=>atob(e.replace(/-/g,"+").replace(/_/g,"/")),We=e=>Uint8Array.from(Me(e),t=>t.charCodeAt(0));var Re=({payload:e,key:t="",subtle:n=crypto.subtle,sort:r=!0})=>{let o={alg:"HS256",typ:"JWT",ver:1},s,l;try{s=W(o),l=W(e)}catch{return Promise.reject("Cannot JSON encode the JWT")}let u,c,a;try{u=q(s),c=q(l),a=u+"."+c}catch{return Promise.reject("Cannot base64url encode the JWT")}return n.importKey("raw",z(t),{name:"HMAC",hash:"SHA-256"},!1,["sign"]).then(p=>n.sign("HMAC",p,z(a))).then(p=>q(K(new Uint8Array(p)))).then(p=>"".concat(u,".").concat(c,".").concat(p))};var Q={};D(Q,{initialize:()=>fe,isBranched:()=>P,setCurrentScript:()=>Ue,setLocation:()=>Je,state:()=>x});var Y={};D(Y,{id:()=>me});var zt=()=>{try{return crypto.getRandomValues(new Uint32Array(1))[0]}catch{return}},Rt=()=>Math.floor(4294967295*Math.random()),me=zt()||Rt();var x={},Ue=e=>{x.currentScript=e},Ne;Ue(((Ne=window.document.currentScript)==null?void 0:Ne.src)||"http://localhost/deploy/test/cytokine.js");var Je=e=>{x.location=e,x.cytokineBranch=new URL(e).searchParams.get("cytokine-branch")};Je(window.location);var Nt=({asset:e,branch:t="master"})=>{let{origin:n}=new URL(x.currentScript);return[n,"cytokine","deploy",t,e].join("/")},Ut=({url:e,id:t})=>new Promise((n,r)=>{let o=document.createElement("script");o.id=t,o.src=e,o.onload=()=>{x.reloaded=o.src,n()},o.onerror=r,o.async=!0,document.readyState==="loading"?addEventListener("DOMContentLoaded",()=>document.body.append(o)):document.body.append(o),x.resolve&&o.onload()}),Jt=async()=>{let e="cytokine.js",t=x.cytokineBranch;try{let n=Nt({asset:e,branch:t});await Ut({url:n,id:"cytokine-branch"})}catch(n){throw console.error("Cytokine: failed to load ".concat(e," on branch ").concat(t)),n}},P=!1,fe=async({currentBranch:e="master",resolve:t=!1}={})=>{if(x.reloaded=!1,x.resolve=t,P=e!=="master",w({type:"library",id:"initialize",build:{version:"1.0.0",date:"2024-12-14T02:34:25.087Z",profile:"production",branch:"master",commit:"536b8964dd9b8d70db33f6c27325a97dac0d3726",environment:"production"}}),!P&&x.cytokineBranch&&x.cytokineBranch!==e)return Jt()};var _t={strictlyNecessary:"C0001",performance:"C0002",functional:"C0003",targeting:"C0004",socialMediaCookies:"C0005"},_e=(e,t=window)=>typeof t.OnetrustActiveGroups>"u"||t.OnetrustActiveGroups.includes(_t[e]);var He=(e=window.crypto)=>e.getRandomValues(new Uint8Array(16)),$e=(e,t=window.crypto.subtle)=>t.importKey("raw",We(e),{name:"AES-CTR"},!1,["encrypt","decrypt"]),Ve=(e,t,n,r=window.crypto.subtle)=>r.encrypt({name:"AES-CTR",counter:t,length:128},e,z(n)).then(o=>new Uint8Array(o)).then(o=>F(o));var he,Ge=async({domain:e,key:t,path:n})=>{if(!e||!t)return n;try{he=he||await $e(t);let r=He(),o=F(r),s=await Ve(he,r,"https://".concat(e).concat(n));return"".concat(o).concat(s)}catch(r){return console.error("Error generating a rotated path",r.message),""}};var b={events:[],context:{},index:0},Gt=({context:e}={})=>{b.events=[],b.context={},b.index=0},Ke=()=>b.events.length<=b.index,w=e=>{e.time=Math.trunc(performance.now()),b.events.push(e)},ge=({context:e}={})=>{b.context=e,b.context.pageview=Y},Kt=Math.random()*100<=5,Fe=(e=Kt)=>(P||e)&&_e("performance"),ye=async({client:e=fetch}={})=>{if(!Fe()||Ke())return;let t=b.events.slice(b.index,b.index+30);b.index+=b.events.length;let n="/cytokine/log",r=window.location.hostname,o=await Ge({domain:r,key:"EZZW3rlNie2M3VD64Rj3Bw",path:n}),s="https://".concat(r,"/").concat(o),l=await Re({payload:{...b.context,events:t},key:"gkqTHpdRoTZkVuier0moNQT5238rf81e"});navigator!=null&&navigator.sendBeacon?await navigator.sendBeacon(s,l):await e(s,{method:"POST",credentials:"include",body:l})},we=async()=>{document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&ye()},!1),await j(),S(()=>ye(),2500)};var X={};D(X,{emit:()=>ke,events:()=>J,history:()=>Ee,on:()=>Ae,reset:()=>qt,subscriptions:()=>M});var Z=Array.isArray,R=e=>e!=null&&typeof e=="object",B=e=>typeof e<"u";var be=e=>typeof e=="function",Ft=e=>typeof e>"u",xe=e=>(...t)=>!e(...t),qe=e=>Object.keys(e).length===0;var Ye=e=>t=>e===t,T=(e,t)=>Z(e)&&Z(t)?!t.find(n=>!e.find(r=>T(r,n)))||!e.find(n=>!t.find(r=>T(r,n))):Z(e)&&!R(t)?!!e.find(n=>T(n,t)):Z(t)&&!R(e)?!!t.find(n=>T(n,e)):R(e)&&R(t)?!Object.entries(t).find(([n,r])=>!T(e[n],r)):Ft(t)?!0:e===t,Qe=(e=[],t=[])=>e.reduce((n,r,o)=>(n[r]=t[o],n),{}),Ze=(e,t)=>[e.slice(0,t),e.slice(t)],E=(e,t)=>t.split(".").reduce((n,r)=>n&&n[r],e),N=(e,t,n)=>{let r=t.split("."),[o,s]=Ze(r,-1),l=o.reduce((u,c)=>(u&&!R(u[c])&&(u[c]={}),u[c]),e);return l&&(l[s]=n),e},ve=(e,t,n)=>{let r=t.split("."),[o,s]=Ze(r,-1),l=o.reduce((u,c)=>u&&u[c],e);return l&&delete l[s],e},U=(e,t)=>JSON.parse(JSON.stringify(e),t);var J=[],M=[],qt=()=>{J=[],M=[]},Ae=({id:e=".*",payload:t={},callback:n})=>{let r={id:e,payload:t,callback:n};return M.push(r),()=>{let o=s=>l=>!T(s,l);M=M.filter(o(r))}},ke=({id:e,payload:t={},timestamp:n=Date.now()})=>{let r={id:e,payload:t,timestamp:n};J=J.concat(r),M.filter(o=>e.match(new RegExp(o.id))).filter(o=>T(t,o.payload)).forEach(o=>o.callback(r))},Ee=({id:e=".*",payload:t={}}={})=>J.filter(n=>n.id.match(new RegExp(e))).filter(n=>T(n.payload,t));var Yt=e=>(t={},n)=>{ke({id:e,payload:t,timestamp:n}),w({type:"bus-event",id:e,payload:t})};var ee=(e,t={})=>n=>(Ee({id:e,payload:t}).forEach(r=>n(r)),Ae({id:e,payload:t,callback:n})),Ie=({id:e,payload:t,timestamp:n})=>Yt(e)(t,n);var Xe=({id:e,payload:t,callback:n})=>ee(e,t)(n),et=ee("adblock.detected"),tt=ee("adblock.not.detected"),Sn=ee("onetrust.groups.updated");var rt=({plus:e=0,minus:t=0,date:n=new Date}={})=>{let r=new Date;return r.setTime(n.getTime()+e*1e3-t*1e3),r};var Ce=document,Zt=["localhost","0.0.0.0","127.0.0.1"],Xt=e=>{let t=e.hostname;return!e||Zt.includes(t)||t.match(/^local\./)?null:t.match(/^(www|stag|stag2|stg)\./)?t.split(".").slice(1).join("."):t},ot=e=>{let t=Ce.cookie;if(!t||!t.length||!e)return;let n=t.split(";").map(o=>o.split("=").map(s=>s.trim())),[,r]=n.find(([o])=>o===e)||[];return r},st=(e,t,n)=>{let r=Xt(Ce.location);Ce.cookie="".concat(e,"=").concat(t,";")+(r?"domain=".concat(r,";secure;samesite=none;"):"")+(n?"expires=".concat(rt({plus:n}).toUTCString(),";"):"")+"path=/;"};var te={};D(te,{consumer:()=>pt,initialize:()=>Se,producer:()=>_});var tn=new Error("channel not available"),k=(...e)=>e.filter(t=>!!t).join("."),it=({bus:e,target:t})=>{let n={bus:e,domains:{},products:new Set,subscriptions:[]};if(!B(t))return tn;n.bus.target(t),n.bus.prefix("cytokine");let r=i=>d=>i.action===d.action&&(i.key.includes(d.key)||d.key.includes(i.key));n.bus.subscribe("set",({key:i,value:d},m)=>{let f=k("domains",i);N(n,f,d),n.subscriptions.filter(r({key:i,action:"set"})).forEach(({key:g,action:A,callback:ie})=>{let ce=k("domains",g),ae=E(n,ce);ie(g,A,ae,m)})}),n.bus.subscribe("unset",({key:i,value:d},m)=>{let f=k("domains",i);ve(n,f,d),n.subscriptions.filter(r({key:i,action:"unset"})).forEach(({key:g,action:A,callback:ie})=>{let ce=k("domains",g),ae=E(n,ce);ie(g,A,ae,m)})}),n.bus.subscribe("register",(i,d)=>{n.products.forEach(m=>p("set",m))});let o=i=>{n.credentials=i,n.bus.authenticate(i),n.bus.emit("register")},s=()=>{n.domains={},n.subscriptions=[]},l=i=>{let d=k("domains",i),m=E(n,d);return p("get",i),m},u=i=>{let d=k("domains",i),m=E(n,d);return p("has",i),B(m)},c=(i,d)=>{let m=k("domains",i);return N(n,m,d),n.products.add(i),p("set",i),d},a=(i,d)=>{let m=k("domains",i);return ve(n,m),n.products.delete(i),p("unset",i),d},p=(i,d)=>{let m=k("domains",d),f=E(n,m);e.emit(i,{key:d,value:f})},h=(i,d,m)=>{if(!be(m))return;let f={key:i,action:d,callback:m};return n.subscriptions.push(f),()=>{n.subscriptions=n.subscriptions.filter(xe(Ye(f)))}};return{state:n,bus:e,register:o,reset:s,get:l,has:u,set:c,unset:a,subscribe:h,readable:i=>{let d=k("domains",i);B(E(n,d))||N(n,d,{});let m=U(E(n,d)),f=()=>{let g=E(n,d);Object.keys(m).forEach(A=>delete m[A]),Object.keys(g).forEach(A=>m[A]=g[A])};return h(i,"set",f),h(i,"unset",f),m},writable:i=>{let d=k("domains",i);return B(E(n,d))||N(n,d,{}),new Proxy({},{set(m,f,g){if(B(g))return m[f]=U(g),c(k(i,f),g),!0}})}}};var rn=Dt(dt(),1);var Te=()=>{let e=EventTarget,t={},n=a=>{t.credentials=a},r=a=>{t.target=a},o=a=>{t.prefix=a},s=a=>[t.prefix,a].join(".");return{backer:e,state:t,authenticate:n,target:r,prefix:o,create:()=>{let a=new e;return r(a),a},emit:(a,p)=>t.target.dispatchEvent(new CustomEvent(s(a),{detail:{credentials:t.credentials,payload:p}})),subscribe:(a,p)=>{let h=({detail:v})=>{try{let{payload:y,credentials:i}=v;p(y,i)}catch(y){console.log(y)}};return t.target.addEventListener(s(a),h),()=>{t.target.removeEventListener(s(a),h)}}}};var sn=({credentials:e,bus:t,target:n})=>{let r=it({bus:t||Te(),target:n||window.document});return r.register(e),{consumer:{channel:r,snapshot:o=>{let s=r.get(o);return B(s)?U(s):void 0},has:o=>r.has(o),subscribe:(o,s)=>r.subscribe(o,"set",s),proxy:o=>r.readable(o)},producer:{channel:r,publish:(o,s)=>r.set(o,s),unpublish:o=>r.unset(o),proxy:o=>r.writable(o)}}},ut=sn;var pt,_,lt=[{id:"cytokine",key:"oDRPFVhTT1ZGKHdcYRrSZZG14giHO1tU"},{id:"journey",key:"MCfNvUszQue4F94i3tdlEyrG97dQ9c2c"},{id:"ads",key:"fxrkGzFii7V6dVdalA83GN7RehJIo0u0"}],cn=(e={},t={})=>{let n=!!lt.find(({key:o,id:s})=>t.id===s&&t.key===o),{id:r}=t;w({type:"client",id:"register",valid:n,credentials:{id:r}}),client.consumer.subscribe(r,(o,s,l,u)=>{let{id:c}=u;w({type:"client",id:"publish",key:o,action:s,value:l,credentials:{id:c}})})},Se=()=>{let e=lt.find(({id:t})=>t==="cytokine");client=ut({credentials:e}),_=client.producer,pt=client.consumer,client.producer.channel.bus.subscribe("register",cn)};var mt=window,ft=e=>{let t=!1,n=c=>{t=!0,w({type:"localStorage",id:"disabled",item:e,message:c})},r=()=>{try{return pe(mt.localStorage.getItem(e)||"{}")}catch({message:c}){return n(c),{}}},o=(c={})=>{try{return mt.localStorage.setItem(e,W(c)),!0}catch({message:a}){return n(a),!1}};return{read:c=>t?void 0:r()[c],write:(c,a)=>{if(t)return!1;let p=r();return p[c]=a,o(p)},remove:c=>{if(t)return!1;let a=r();return a[c]===void 0?!1:(delete a[c],o(a))},disable:n,isDisabled:()=>t}};var Oe=async(e,t,n=1e3)=>{let r;await j(),r=S(()=>{e()&&(V(r),t())},n)},ne=async(e,t,n=1e3)=>{if(e())return t();Oe(e,t,n)};var H=window;H.setInterval=S;H.setTimeout=G;var I,dn=[],se="CN_cab",yt="div[id*='google_ads_iframe'] > iframe",gt=e=>H.document.querySelectorAll(e).length,un=()=>{var e;return(e=H.cns)==null?void 0:e.library},pn=e=>!e(),xt=ft("cytokine_journey"),wt=e=>{switch(e){case!0:return"1";case!1:return"0";default:return}},oe=e=>{st(se,wt(e)),xt.write(se,wt(e))},bt=e=>{switch(e){case"1":return!0;case"0":return!1;default:return}},vt=()=>{let e=bt(ot(se)),t=bt(xt.read(se));if(t!==void 0&&e===void 0)return oe(t),t;if(e!==void 0&&t===void 0||t!==void 0&&e!==void 0&&t!==e)return oe(e),e;if(e!==void 0)return e;if(t!==void 0)return t},re=e=>{I!==e&&(I=e,_.publish("adblock.v1",{presence:I}),w({type:"adblock",id:"change",presence:I}),I!=vt()&&oe(I),dn.forEach(t=>t(I)))},At=()=>{I=vt(),_.publish("adblock.v1",{presence:I}),w({type:"adblock",id:"initialize",presence:I}),et(()=>{H.setTimeout(()=>re(!gt(yt)),5e3)}),tt(()=>re(!1)),Oe(()=>pn(un),()=>{w({type:"adblock",id:"ads_library_blocked"}),re(!0)},2500),ne(()=>gt(yt),()=>{w({type:"adblock",id:"google_ads_rendered"}),re(!1)},100)};var mn=e=>t=>t*e;var kt=async(e,{immediate:t=!0,initial:n=100,max:r=6e4,strategy:o=mn(2)}={},{setTimeout:s,clearTimeout:l}=O)=>{let u=t?0:n,c,a=!1,p=async()=>{await e(),!a&&(u===0?u=n:u=Math.min(o(n,u),r),c=s(p,u))};return await j(),c=s(p,u),()=>{a=!0,l(c)}};var L,hn=()=>{L=document.createElement("div"),L.setAttribute("class","ad ad-body ad-slot ad-content ad-frame ad-item ad-section ad-text ad-wrapper ad--container ad--section ad--wrapper adSlot"),L.setAttribute("style","width: 1px !important; height: 1px !important; position: absolute !important; left: -1000px !important; top: -1000px !important"),window.document.body.appendChild(L)},yn=()=>{let e=window.getComputedStyle(L);return L.clientHeight===1&&L.clientWidth===1&&e.getPropertyValue("display")!=="none"&&e.getPropertyValue("visibility")!=="hidden"},Be,gn=()=>{yn()||(Be&&Be(),L.remove(),w({type:"signal",id:"trap",visible:!1}))},Et=async()=>{await $(),hn(),Be=await kt(gn)};var bn={},xn=()=>{Object.entries(bn).forEach(([e,t])=>{Xe({id:e,callback:({payload:n})=>window.cnBus.emit(t,n)})})},vn={"ads.environment.adblock.detected":"adblock.detected","ads.environment.adblock.notdetected":"adblock.not.detected"},Le=new RegExp(/#{([^.]+?)}/g),It=(e,t)=>{let n=e.matchAll(Le),r=Array.from(n).map(([,l])=>l),o=new RegExp(e.replace(Le,"([^.]+)")),s=(t.match(o)||[]).slice(1);return Qe(r,s)},An=()=>{Object.entries(vn).forEach(([e,t])=>{let n=e.replace(Le,"#");window.cnBus.history(n).forEach(([r,o])=>{let s=It(e,r);Ie({id:t,timestamp:o,...qe(s)?{}:{payload:s}})}),window.cnBus.on(n,(r={},{topic:o}={})=>{if(!o)return;let s=It(e,o);Ie({id:t,payload:{...s,...r}})})})},Ct=()=>{ne(()=>!!window.cnBus,()=>{An(),xn()},100)};(async function(){if(await fe(),x.reloaded)return;let e={pageview:me,url:window.document.location.toString()};ge({context:e}),we(O),Se(),Ct(),Et(),At(),P&&(window.cytokinePanel={cBus:X,client:te,eventLogger:C,library:Q})})();})();
